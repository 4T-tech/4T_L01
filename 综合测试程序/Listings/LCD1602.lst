C51 COMPILER V9.60.7.0   LCD1602                                                           09/26/2025 11:52:30 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE LCD1602.c COMPACT OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTEXTEND PRINT(.\Li
                    -stings\LCD1602.lst) TABS(2) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include <stc12.h>
   2          #include "intrins.h"
   3          
   4          
   5          //控制线定义
   6          sbit RS = P2^0;
   7          sbit RW = P2^1; 
   8          sbit EN = P2^2;
   9          sbit D0 = P1^0;
  10          sbit D1 = P1^1;
  11          sbit D2 = P1^2;
  12          sbit D3 = P1^3;
  13          sbit D4 = P1^4;
  14          sbit D5 = P1^5;
  15          sbit D6 = P1^6;
  16          sbit D7 = P1^7;
  17          
  18          //必要的延时
  19          void delay_ms(unsigned char t)
  20          {
  21   1        unsigned char i;
  22   1        while(t--)
  23   1        {
  24   2          for(i=0;i<112;i++); 
  25   2        }
  26   1      }
  27          
  28          //写命令函数
  29          void write_command(unsigned char cmd)
  30          {
  31   1          delay_ms(5); // check busy flag
  32   1          EN = 0;
  33   1          RS = 0;
  34   1          RW = 0;
  35   1          _nop_();
  36   1          EN = 1;
  37   1          
  38   1          
  39   1          D7 = (cmd>>7)&0x01;
  40   1          D6 = (cmd>>6)&0x01;
  41   1          D5 = (cmd>>5)&0x01;
  42   1          D4 = (cmd>>4)&0x01;
  43   1          D3 = (cmd>>3)&0x01;
  44   1          D2 = (cmd>>2)&0x01;
  45   1          D1 = (cmd>>1)&0x01;
  46   1          D0 = cmd&0x01;
  47   1      
  48   1          EN = 0;
  49   1      }
  50          
  51          void write_data(unsigned char dat)
  52          {
  53   1          delay_ms(5); //busy flag check 
  54   1          EN = 0;
C51 COMPILER V9.60.7.0   LCD1602                                                           09/26/2025 11:52:30 PAGE 2   

  55   1          RS = 1;
  56   1          RW = 0; 
  57   1          _nop_();
  58   1          EN = 1;
  59   1      
  60   1          
  61   1          D7 = (dat>>7)&0x01;
  62   1          D6 = (dat>>6)&0x01;
  63   1          D5 = (dat>>5)&0x01;
  64   1          D4 = (dat>>4)&0x01;
  65   1          D3 = (dat>>3)&0x01;
  66   1          D2 = (dat>>2)&0x01;
  67   1          D1 = (dat>>1)&0x01;
  68   1          D0 = dat&0x01;
  69   1      
  70   1          EN = 0;
  71   1          RS = 0;
  72   1      }
  73          
  74          //显示一个字符
  75          void dsp_onechar(unsigned char pos,unsigned char c)
  76          {
  77   1        unsigned char p;
  78   1        if (pos>=0x10)
  79   1          p=pos+0xb0; 
  80   1        else 
  81   1          p=pos+0x80; 
  82   1        write_command(p);
  83   1        write_data(c); 
  84   1      }
  85          
  86          //显示字符串
  87          void dsp_string(unsigned char line,unsigned char *p,unsigned char length)
  88          {
  89   1        unsigned char l,i;
  90   1        l=line<<4;
  91   1        for (i=0;i<length;i++)
  92   1        dsp_onechar(l++,*(p+i));
  93   1      }
  94          
  95          //LCD1602初始化操作
  96          void init_1602(void)
  97          {
  98   1        delay_ms(15);
  99   1        write_command(0x38); 
 100   1        write_command(0x38); 
 101   1        write_command(0x38); 
 102   1        write_command(0x06); 
 103   1        write_command(0x0c); 
 104   1        write_command(0x01); 
 105   1        delay_ms(15);
 106   1        delay_ms(15);
 107   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    319    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       7
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
C51 COMPILER V9.60.7.0   LCD1602                                                           09/26/2025 11:52:30 PAGE 3   

   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
