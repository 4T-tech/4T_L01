C51 COMPILER V9.60.7.0   LCD1602                                                           09/28/2025 15:09:36 PAGE 1   


C51 COMPILER V9.60.7.0, COMPILATION OF MODULE LCD1602
OBJECT MODULE PLACED IN .\Objects\LCD1602.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE LCD1602.c COMPACT WARNINGLEVEL(0) OPTIMIZE(8,SPEED) BROWSE DEBUG OBJECTE
                    -XTEND PRINT(.\Listings\LCD1602.lst) TABS(2) OBJECT(.\Objects\LCD1602.obj)

line level    source

   1          #include "LCD1602.h"
   2          
   3          
   4          //控制线定义
   5          sbit RS = P2^0;
   6          sbit RW = P2^1; 
   7          sbit EN = P2^2;
   8          sbit D0 = P1^0;
   9          sbit D1 = P1^1;
  10          sbit D2 = P1^2;
  11          sbit D3 = P1^3;
  12          sbit D4 = P1^4;
  13          sbit D5 = P1^5;
  14          sbit D6 = P1^6;
  15          sbit D7 = P1^7;
  16          
  17          //必要的延时
  18          void delay_ms(unsigned char t)
  19          {
  20   1        unsigned char i;
  21   1        while(t--)
  22   1        {
  23   2          for(i=0;i<112;i++); 
  24   2        }
  25   1      }
  26          
  27          //写命令函数
  28          void write_command(unsigned char cmd)
  29          {
  30   1          delay_ms(5); // check busy flag
  31   1          EN = 0;
  32   1          RS = 0;
  33   1          RW = 0;
  34   1          _nop_();
  35   1          EN = 1;
  36   1          
  37   1          
  38   1          D7 = (cmd>>7)&0x01;
  39   1          D6 = (cmd>>6)&0x01;
  40   1          D5 = (cmd>>5)&0x01;
  41   1          D4 = (cmd>>4)&0x01;
  42   1          D3 = (cmd>>3)&0x01;
  43   1          D2 = (cmd>>2)&0x01;
  44   1          D1 = (cmd>>1)&0x01;
  45   1          D0 = cmd&0x01;
  46   1      
  47   1          EN = 0;
  48   1      }
  49          
  50          void write_data(unsigned char dat)
  51          {
  52   1          delay_ms(5); //busy flag check 
  53   1          EN = 0;
  54   1          RS = 1;
C51 COMPILER V9.60.7.0   LCD1602                                                           09/28/2025 15:09:36 PAGE 2   

  55   1          RW = 0; 
  56   1          _nop_();
  57   1          EN = 1;
  58   1      
  59   1          
  60   1          D7 = (dat>>7)&0x01;
  61   1          D6 = (dat>>6)&0x01;
  62   1          D5 = (dat>>5)&0x01;
  63   1          D4 = (dat>>4)&0x01;
  64   1          D3 = (dat>>3)&0x01;
  65   1          D2 = (dat>>2)&0x01;
  66   1          D1 = (dat>>1)&0x01;
  67   1          D0 = dat&0x01;
  68   1      
  69   1          EN = 0;
  70   1          RS = 0;
  71   1      }
  72          
  73          //显示一个字符
  74          void dsp_onechar(unsigned char pos,unsigned char c)
  75          {
  76   1        unsigned char p;
  77   1        if (pos>=0x10)
  78   1          p=pos+0xb0; 
  79   1        else 
  80   1          p=pos+0x80; 
  81   1        write_command(p);
  82   1        write_data(c); 
  83   1      }
  84          
  85          //显示字符串
  86          void dsp_string(unsigned char line,unsigned char *p,unsigned char length)
  87          {
  88   1        unsigned char l,i;
  89   1        l=line<<4;
  90   1        for (i=0;i<length;i++)
  91   1        dsp_onechar(l++,*(p+i));
  92   1      }
  93          
  94          //LCD1602初始化操作
  95          void init_1602(void)
  96          {
  97   1        delay_ms(15);
  98   1        write_command(0x38); 
  99   1        write_command(0x38); 
 100   1        write_command(0x38); 
 101   1        write_command(0x06); 
 102   1        write_command(0x0c); 
 103   1        write_command(0x01); 
 104   1        delay_ms(15);
 105   1        delay_ms(15);
 106   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    319    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----       7
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
C51 COMPILER V9.60.7.0   LCD1602                                                           09/28/2025 15:09:36 PAGE 3   

END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
